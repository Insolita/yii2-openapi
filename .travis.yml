language: php

matrix:
  include:
    - php: 7.1
      env: PHPUNIT_VERSION=''
    - php: 7.2
      env: PHPUNIT_VERSION=''
    - php: 7.3
      env: PHPUNIT_VERSION=''
    - php: 7.4
      env: PHPUNIT_VERSION='^9.0'

install:
  - travis_retry composer self-update && composer --version
  - travis_retry composer install --prefer-dist --no-interaction
  - if [[ $PHPUNIT_VERSION != '' ]]; then composer update --dev phpunit/phpunit;  fi
script:
  - make test
  - if [[ $TRAVIS_PHP_VERSION == "7.3" || $TRAVIS_PHP_VERSION == "7.4" ]]; then true; else make check-style; fi
